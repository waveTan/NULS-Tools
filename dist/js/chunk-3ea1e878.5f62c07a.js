(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ea1e878"],{"188a":function(t,e,s){},"286d":function(t,e,s){"use strict";s("2947")},2947:function(t,e,s){},"36bd":function(t,e,s){"use strict";var r=s("4bf8"),a=s("77f1"),i=s("9def");t.exports=function(t){var e=r(this),s=i(e.length),n=arguments.length,o=a(n>1?arguments[1]:void 0,s),d=n>2?arguments[2]:void 0,l=void 0===d?s:a(d,s);while(l>o)e[o++]=t;return e}},"5e72":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"lucky"},[s("h2",{staticClass:"tc"},[t._v("NULS 大转盘")]),s("LuckDraw",{ref:"luckDraw",attrs:{awards:t.awards,rate:t.rate,radius:t.radius,textFontSize:t.textFontSize,lineHeight:t.lineHeight,textColor:t.textColor,textMargin:t.textMargin,textPadding:t.textPadding,btnFontSize:t.btnFontSize,btnColor:t.btnColor,btnBorderColor1:t.btnBorderColor1,btnBorderColor2:t.btnBorderColor2,btnBorderColor3:t.btnBorderColor3,btnBgColor:t.btnBgColor,btnText:t.btnText,btnRadius:t.btnRadius,borderColor:t.borderColor},on:{start:t.handleStart,end:t.handleEnd},model:{value:t.currIndex,callback:function(e){t.currIndex=e},expression:"currIndex"}}),s("div",{staticClass:"jackpot"},[s("div",{staticClass:"font14"},[s("div",{staticClass:"font14 fl"},[t._v("奖池")]),s("div",{staticClass:"font12 fl"},[t._v("（NULSd6HghDFLgVoprpkePPJzxnXaGY2AcWAVE）")]),s("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[s("div",{staticClass:"rule"},[s("div",[t._v("\n            游戏规则:"),s("br"),t._v("\n            1、玩家花费0.01NULS 玩一次抽奖"),s("br"),t._v("\n            2、中奖以后系统立即转账到玩家地址"),s("br"),t._v("\n            3、0.01-手续费后的归集到奖池"),s("br"),t._v("\n            4、奖池金额望大佬多多支持（中奖几率和奖池中单个数量有关）\n          ")])]),s("el-button",{staticClass:"fl",staticStyle:{"margin-top":"-13px"},attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("规则")])],1)],1),s("ul",{staticClass:"cb"},[s("li",[s("span",[t._v("NULS:")]),s("font",[t._v("1000.123456")])],1),s("li",[s("span",[t._v("CC:")]),s("font",[t._v("1000.123456")])],1),s("li",[s("span",[t._v("wave:")]),s("font",[t._v("1000.123456")])],1),s("li",[s("span",[t._v("BBAI:")]),s("font",[t._v("1000.123456")])],1),s("li",[s("span",[t._v("Vibook:")]),s("font",[t._v("1000.123456")])],1),s("li",[s("span",[t._v("TPU:")]),s("font",[t._v("1000.123456")])],1),s("li",[s("span",[t._v("SLKC:")]),s("font",[t._v("1000.123456")])],1)])]),s("Password",{ref:"password",on:{passwordSubmit:t.luckPassSubmit}})],1)},a=[],i=(s("7f7f"),s("96cf"),s("1da1")),n=s("0ad0"),o=s.n(n),d=s("db49"),l=s("1959"),u=s("d1f0"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("canvas",{staticClass:"ldq-luck",attrs:{id:"canvas"}})},h=[],f=(s("ac6a"),s("6c7b"),s("28a5"),s("c5f6"),{data:function(){return{canvas:"",ctx:"",startRadian:0,canBeClick:!0,currIndex:this.value}},props:{value:{type:Number,default:0},rate:{type:Number,default:80},radius:{type:Number,default:180},textFontSize:{type:String,default:"13px"},lineHeight:{type:Number,default:20},textColor:{type:String,default:"#d64737"},textMargin:{type:Number,default:30},textPadding:{type:Number,default:0},btnFontSize:{type:String,default:"26px"},btnColor:{type:String,default:"#d64737"},btnBorderColor1:{type:String,default:"#d64737"},btnBorderColor2:{type:String,default:"#fff"},btnBorderColor3:{type:String,default:"#f6c66f"},btnBgColor:{type:String,default:"#ffdea0"},btnText:{type:String,default:"抽奖"},btnRadius:{type:Number,default:60},borderColor:{type:String,default:"#d64737"}},watch:{value:function(t){this.currIndex=t}},mounted:function(){this.initCanvas()},methods:{initCanvas:function(){this.canvas=document.querySelector("#canvas"),this.canvas.width=2*this.radius,this.canvas.height=2*this.radius,this.render(),this.startRotate()},getLineTextList:function(t,e,s){s+=this.textPadding;for(var r=e.split(""),a="",i=[],n=0;n<r.length;n++)t.measureText(a).width>=s&&(i.push(a),s-=t.measureText(e[0]).width,a=""),a+=r[n];return i.push(a),i},drawPanel:function(){var t=this.ctx,e=this.startRadian;t.save(),t.beginPath(),t.fillStyle=this.borderColor,t.arc(this.radius,this.radius,this.radius,e,2*Math.PI+e,!1),t.fill(),t.restore()},drawPrizeBlock:function(){for(var t=this,e=this.ctx,s=this.awards,r=this.startRadian,a=2*Math.PI/s.length,i=r+a,n=0;n<s.length;n++)e.save(),e.beginPath(),e.fillStyle=s[n].color||(n%2==0?"#f8d384":"#f9e3bb"),e.moveTo(this.radius,this.radius),e.arc(this.radius,this.radius,this.radius-20,r,i,!1),e.fill(),e.restore(),e.save(),e.fillStyle=this.textColor,e.font="".concat(this.textFontSize," Arial"),e.translate(this.radius+Math.cos(r+a/2)*(this.radius-this.textMargin),this.radius+Math.sin(r+a/2)*(this.radius-this.textMargin)),e.rotate(r+a/2+Math.PI/2),this.getLineTextList(e,s[n].name,70).forEach((function(s,r){e.fillText(s,-e.measureText(s).width/2,++r*t.lineHeight)})),e.restore(),r+=a,i+=a},windowToCanvas:function(t,e){var s=t.getBoundingClientRect(),r=e.clientX,a=e.clientY;return{x:r-s.left,y:a-s.top}},play:function(t,e){var s=document.querySelector(".ldq-luck"),r=this.canvas,a=this.ctx;if((t<0||t>=this.awards.length)&&console.error("该索引的奖品不存在!"),!this.canBeClick||t<0||t>=this.awards.length)return!1;this.currIndex=t,this.canBeClick=!1;var i=e?this.windowToCanvas(r,e):{x:s.offsetWidth/2,y:s.offsetHeight/2};a.beginPath(),a.arc(this.radius,this.radius,50,0,2*Math.PI,!1),a.isPointInPath(i.x,i.y)?(this.$emit("start"),this.startRadian=-Math.floor(180*Math.random()),console.log("123")):this.canBeClick=!0},startRotate:function(){var t=this,e=this.canvas,s=this.ctx,r=e.getAttribute("style");this.render(),e.addEventListener("mousedown",(function(e){return t.play(t.currIndex,e)})),e.addEventListener("mousemove",(function(a){var i=t.windowToCanvas(e,a);s.beginPath(),s.arc(t.radius,t.radius,30,0,2*Math.PI,!1),s.isPointInPath(i.x,i.y)?e.setAttribute("style","cursor: pointer;".concat(r)):e.setAttribute("style",r)}))},rotatePanel:function(t){var e=(t-this.startRadian)/this.rate;if(this.startRadian+=e,t-this.startRadian<=.05)return this.$emit("end",this.currIndex),this.canBeClick=!0;this.render(),window.requestAnimationFrame(this.rotatePanel.bind(this,t))},drawButton:function(){var t=this.ctx;t.save(),t.beginPath(),t.fillStyle=this.btnBorderColor1,t.arc(this.radius,this.radius,this.btnRadius,0,2*Math.PI,!1),t.fill(),t.restore(),t.save(),t.beginPath(),t.fillStyle=this.btnBorderColor2,t.arc(this.radius,this.radius,this.btnRadius-5,0,2*Math.PI,!1),t.fill(),t.restore(),t.save(),t.beginPath(),t.fillStyle=this.btnBorderColor3,t.arc(this.radius,this.radius,this.btnRadius-10,0,2*Math.PI,!1),t.fill(),t.restore(),t.save(),t.beginPath(),t.fillStyle=this.btnBorderColor3,t.moveTo(this.radius-this.btnRadius/2,this.radius-this.btnRadius/2-5),t.lineTo(this.radius,this.radius-this.btnRadius-25),t.lineTo(this.radius+this.btnRadius/2,this.radius-this.btnRadius/2-5),t.closePath(),t.fill(),t.restore(),t.save(),t.beginPath(),t.fillStyle=this.btnBgColor,t.arc(this.radius,this.radius,this.btnRadius-20,0,2*Math.PI,!1),t.fill(),t.restore(),t.save(),t.beginPath(),t.fillStyle=this.btnColor,t.font="".concat(this.btnFontSize," Arial"),t.translate(this.radius,this.radius),t.fillText(this.btnText,-t.measureText(this.btnText).width/2,8),t.restore()},distanceToStop:function(){var t=this,e=0,s=0,r=this.awards.map((function(e,s){var r=2*Math.PI/t.awards.length;return r*s+(r*(s+1)-r*s)/2})),a=this.currIndex;return e=r[a],s=3*Math.PI/2-e,s=s>0?s:2*Math.PI+s,s+10*Math.PI},render:function(){this.drawPanel(),this.drawPrizeBlock(),this.drawButton()}}}),b=f,p=s("2877"),v=Object(p["a"])(b,c,h,!1,null,null,null),w=v.exports,m={data:function(){return{toAddress:"NULSd6HgaWymKrQ7NdtWossLFzunasJzdwave",transferHash:"",currIndex:2,rate:80,radius:220,textFontSize:"13px",lineHeight:20,textColor:"#d64737",textMargin:30,textPadding:0,btnFontSize:"26px",btnColor:"#d64737",btnBorderColor1:"#d64737",btnBorderColor2:"#ffffff",btnBorderColor3:"#f6c66f",btnBgColor:"#ffdea0",btnText:"试试",btnRadius:60,borderColor:"#d64737",awards:[{name:"NULS 主资产 1",color:"#f9e3bb"},{name:"CC 合约 100",color:"#f8d384"},{name:"wave 主资产 1000",color:"#f9e3bb"},{name:"BBAI 主资产 100",color:"#f8d384"},{name:"Vibook 主资产 10",color:"#f9e3bb"},{name:"TPU 主资产 10",color:"#f8d384"},{name:"NULS 主资产 10",color:"#f8d384"}]}},components:{LuckDraw:w,Password:u["a"]},created:function(){},mounted:function(){var t=this;setTimeout((function(){t.$refs.luckDraw.play(3)}),1e3)},destroyed:function(){},watch:{},methods:{handStartBefore:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(localStorage.hasOwnProperty("accountInfo")){t.next=3;break}return this.$message({message:"请先导入账户!",type:"warning"}),t.abrupt("return",{success:!1});case 3:return e=JSON.parse(localStorage.getItem("accountInfo")),t.next=6,Object(l["c"])(e.address,d["e"].chainId,d["e"].assetsId);case 6:if(s=t.sent,!(s.success&&s.data.balance<1e4)){t.next=10;break}return this.$message({message:"此账户余额不足，请充值或重新导入!",type:"error"}),t.abrupt("return",{success:!1});case 10:this.$refs.password.showPassword(!0);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),luckPassSubmit:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var s,r,a,i,n,u,c,h,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=JSON.parse(localStorage.getItem("accountInfo")),t.next=3,Object(l["e"])(s,e);case 3:return r=t.sent,a={fromAddress:r.address,assetsChainId:d["e"].chainId,assetsId:d["e"].assetsId,toAddress:this.toAddress,amount:1e4,fee:1e5},t.next=7,Object(l["c"])(s.address,d["e"].chainId,d["e"].assetsId);case 7:if(i=t.sent,!(i.success&&i.data.balance<1e4)){t.next=11;break}return this.$message({message:"此账户余额不足，请充值或重新导入!",type:"error"}),t.abrupt("return",{success:!1});case 11:return t.next=13,Object(l["d"])(a,i);case 13:return n=t.sent,u="lucky ticket",t.next=17,o.a.transactionAssemble(n.data.inputs,n.data.outputs,u,2);case 17:return c=t.sent,console.log(c),t.next=21,o.a.transactionSerialize(o.a.decrypteOfAES(s.aesPri,e),s.pub,c);case 21:return h=t.sent,console.log(h),this.transferHash="256423",t.next=26,Object(l["f"])(h);case 26:f=t.sent,console.log(f),this.$refs.luckDraw.play(3);case 29:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleStart:function(){console.log("开始抽奖")},handleEnd:function(t){console.log(t),console.log("恭喜您抽到大奖, 奖品为"+this.awards[this.currIndex].name)}}},g=m,x=(s("286d"),Object(p["a"])(g,r,a,!1,null,null,null));e["default"]=x.exports},"6c7b":function(t,e,s){var r=s("5ca1");r(r.P,"Array",{fill:s("36bd")}),s("9c6c")("fill")},7672:function(t,e,s){"use strict";s("188a")},d1f0:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{staticClass:"password-dialog",attrs:{title:t.$t("tips.password0"),visible:t.passwordVisible,top:"30vh",width:t.width,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.passwordVisible=e},open:t.passwordShow,close:t.passwordClose}},[s("el-form",{ref:"passwordForm",attrs:{model:t.passwordForm,rules:t.passwordRules},nativeOn:{submit:function(t){t.preventDefault()}}},[s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{ref:"inpus",attrs:{type:"password",maxlength:22},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enterSubmit("passwordForm")}},model:{value:t.passwordForm.password,callback:function(e){t.$set(t.passwordForm,"password",e)},expression:"passwordForm.password"}})],1)],1),t.isShowKeep?s("el-checkbox",{model:{value:t.keepRadio,callback:function(e){t.keepRadio=e},expression:"keepRadio"}},[s("span",[t._v("记住密码")])]):t._e(),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.passwordClose}},[t._v(t._s(t.$t("public.cancel")))]),s("el-button",{attrs:{type:t.isDisabled?"info":"success",disabled:t.isDisabled,id:"passwordInfo"},on:{click:function(e){return t.dialogSubmit("passwordForm")}}},[s("span",[t._v(" "+t._s(t.disabledInfo))])])],1)],1)},a=[],i=(s("ac4d"),s("8a81"),s("5df3"),s("1c4c"),s("7f7f"),s("6b54"),s("6ace"));function n(t,e){var s="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!s){if(Array.isArray(t)||(s=o(t))||e&&t&&"number"===typeof t.length){s&&(t=s);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,n=!0,d=!1;return{s:function(){s=s.call(t)},n:function(){var t=s.next();return n=t.done,t},e:function(t){d=!0,i=t},f:function(){try{n||null==s.return||s.return()}finally{if(d)throw i}}}}function o(t,e){if(t){if("string"===typeof t)return d(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,r=new Array(e);s<e;s++)r[s]=t[s];return r}var l={props:{isTime:{type:Boolean,default:!1}},data:function(){var t=this,e=function(e,s,r){""===s?r(new Error(t.$t("tips.password0"))):r()};return{addressList:[],addressInfo:{},passwordVisible:!1,passwordForm:{password:""},passwordRules:{password:[{validator:e,trigger:["blur","change"]}]},isShowKeep:!1,keepRadio:!1,timeLag:3e5,width:Object(i["b"])()?"35%":"95%",isDisabled:!1,disabledValue:0,disabledInfo:""}},created:function(){0},mounted:function(){},watch:{passwordVisible:function(t){var e=this;t&&setTimeout((function(){e.$refs["inpus"].focus()}),200)}},methods:{enterSubmit:function(t){this.passwordForm.password&&this.dialogSubmit(t)},passwordClose:function(){this.$refs["passwordForm"].resetFields(),this.passwordVisible=!1,this.timeLag=3e5,this.keepRadio=!1},showPassword:function(t,e){var s=this;if(this.addressList=Object(i["f"])(0),e)if(this.isShowKeep=!0,this.addressInfo=this.addressList.filter((function(t){return t.address===e}))[0],this.addressInfo.password){this.passwordForm.password=this.addressInfo.password,this.keepRadio=!0,this.disabledValue=3,this.isDisabled=!0,this.disabledInfo="合约参数验证中:"+this.disabledValue;var r=setInterval((function(){s.disabledValue=s.disabledValue-1,s.disabledInfo="合约参数验证中:"+s.disabledValue,0===s.disabledValue&&(clearInterval(r),s.isDisabled=!1,s.disabledInfo=s.$t("public.confirm"))}),1e3)}else this.isShowKeep=!0,this.isDisabled=!1,this.disabledInfo=this.$t("public.confirm");else this.isShowKeep=!1,this.isDisabled=!1,this.disabledInfo=this.$t("public.confirm");this.passwordVisible=t},dialogSubmit:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;if(e.keepRadio){var s,r=n(e.addressList);try{for(r.s();!(s=r.n()).done;){var a=s.value;a.address===e.addressInfo.address&&(a.password=e.passwordForm.password)}}catch(l){r.e(l)}finally{r.f()}}else{var i,o=n(e.addressList);try{for(o.s();!(i=o.n()).done;){var d=i.value;d.address===e.addressInfo.address&&(d.password="")}}catch(l){o.e(l)}finally{o.f()}}localStorage.setItem("addressData",JSON.stringify(e.addressList)),e.$emit("passwordSubmit",e.passwordForm.password),e.passwordVisible=!1}))}}},u=l,c=(s("7672"),s("2877")),h=Object(c["a"])(u,r,a,!1,null,null,null);e["a"]=h.exports}}]);
//# sourceMappingURL=chunk-3ea1e878.5f62c07a.js.map